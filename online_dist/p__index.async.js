"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{21180:function(ke,J,a){a.r(J),a.d(J,{default:function(){return xe}});var Z=a(861),$=a.n(Z),G=a(27424),O=a.n(G),o=a(62435),H=a(42122),A=a.n(H),R=a(70215),z=a.n(R),V=a(14926),W=a(45146),K=a(72490),U=a(44532),w=a(93179),Q=a(87547),X=a(754),n=a(86074);function Y(u){var h=u.children;return(0,n.jsx)("div",{className:"code-copy",children:(0,n.jsx)("div",{className:"code-copy-btn",children:(0,n.jsx)(X.Z.Text,{copyable:{text:h[0].props.children[0]}})})})}var q=(0,o.memo)(Y),_=a(98524),ee=["node","inline","className","children"];function ne(u){var h,i=u.answerList,d=u.isShowImg,S=u.prohibit,f=u.onSubmit,t,g=function(){var r=document.querySelector(".ChatBox-contents");r.scrollHeight>r.clientHeight?t=setTimeout(function(){r.scrollTop=r.scrollHeight,r.style.opacity=1},500):r.style.opacity=1},b=function(r){var m=r.children;return(0,n.jsxs)("pre",{className:"blog-pre",children:[(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"loading..."}),children:(0,n.jsx)(q,{children:m})}),m]})};return(0,o.useEffect)(function(){return g(),function(){clearTimeout(t)}},[(h=document.querySelector(".ChatBox-contents"))===null||h===void 0?void 0:h.scrollHeight,i==null?void 0:i.length]),(0,n.jsxs)("div",{className:"ChatBox",children:[(0,n.jsx)("div",{className:"ChatBox-contents",children:(i||[]).map(function(e,r){return(0,n.jsx)("div",{className:"ChatBox-contents-inner",children:(0,n.jsxs)("div",{className:"ChatBox-contents-inner-box",id:e!=null&&e.id?"":"innerStyle",children:[(0,n.jsx)("div",{className:"ChatBox-contents-inner-box-logo",children:(0,n.jsx)(_.C,{size:32,icon:(0,n.jsx)(Q.Z,{}),src:e!=null&&e.id?"https://img.alicdn.com/imgextra/i3/O1CN01PWSks31iDdBe1GK0d_!!6000000004379-2-tps-200-200.png":null})}),(0,n.jsxs)("div",{className:e!=null&&e.id&&d&&(i==null?void 0:i.length)-1==r?"ChatBox-contents-inner-box-text reactMarkdownIds":"ChatBox-contents-inner-box-text",id:e!=null&&e.id?"textStyle":"",children:[(e==null?void 0:e.id)&&(0,n.jsx)("div",{className:"ChatGPTRobot",children:"ChatGPT"}),!(e!=null&&e.text)&&(0,n.jsx)("div",{className:"example"}),e!=null&&e.id?(0,n.jsx)(V.D,{children:e==null?void 0:e.text,rehypePlugins:[W.Z],remarkPlugins:[K.Z,{singleTilde:!1,tableCellPadding:!0,tablePipeAlign:!0,stringLength:U.Z}],components:{pre:b,code:function(p){var B=p.node,k=p.inline,y=p.className,N=y===void 0?"blog-code":y,c=p.children,C=z()(p,ee),j=/language-(\w+)/.exec(N||"");return!k&&j?(0,n.jsx)(w.Z,A()({showLineNumbers:!0,linkTarget:"_blank",language:j[1]||"java",PreTag:"div",children:String(c).replace(/\n$/,""),wrapLines:!0},C)):(0,n.jsx)("code",A()(A()({className:N},C),{},{children:c}))}}},JSON.parse(JSON.stringify(r))):e==null?void 0:e.text]})]})},JSON.stringify(r))})}),!S&&(0,n.jsx)("div",{className:"ChatBox-children1",children:(0,n.jsx)("div",{className:"ChatBox-children1-innerbox",children:(0,n.jsxs)("div",{className:"onceMore",onClick:function(){return f(!0)},children:[(0,n.jsx)("div",{className:"onceMoreImgs"}),"\u518D\u6765\u4E00\u6B21"]})})})]})}var te=(0,o.memo)(ne),M=a(69974),ae=a(52530),re=a(17061),D=a.n(re),se=a(17156),le=a.n(se),ie=a(74704),oe=a.n(ie),de=a(56690),ue=a.n(de),ce=a(89728),ve=a.n(ce),he=function(){function u(){ue()(this,u),this.decoder=new TextDecoder,this.lastString=""}return ve()(u,[{key:"transform",value:function(i,d){var S="".concat(this.lastString).concat(this.decoder.decode(i)),f=S.split(/\r\n|[\r\n]/g);this.lastString=f.pop()||"";var t=oe()(f),g;try{for(t.s();!(g=t.n()).done;){var b=g.value;d.enqueue(b)}}catch(e){t.e(e)}finally{t.f()}}},{key:"flush",value:function(i){this.lastString&&i.enqueue(this.lastString)}}]),u}(),ge=a(11142),fe=a.n(ge),me=function(){var u=le()(D()().mark(function h(i,d,S){var f,t,g,b,e,r,m,p,B,k,y,N,c,C,j,T,I;return D()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=S.doneFn,g=S.lineFn,console.log(i,t,g),b=new TransformStream(new he),s.next=5,fetch("http://chatapi.cfyhome.com/api/openai",{method:"POST",body:JSON.stringify({prompt:i}),headers:{"content-type":"application/json"},mode:"cors",credentials:"include"});case 5:e=s.sent,r=(e==null?void 0:e.body)||(e==null||(f=e._bodyBlob)===null||f===void 0?void 0:f.stream()),m=r==null?void 0:r.pipeThrough(b),p=m==null?void 0:m.getReader();case 9:return s.next=12,p.read();case 12:if(B=s.sent,k=B.done,y=B.value,N=y?JSON.parse(JSON.stringify(y)).substr(6):"",N!="[DONE]"){s.next=19;break}return t(),s.abrupt("return");case 19:c="",s.prev=20,c=N?(C=fe().parse(N))===null||C===void 0||(j=C.choices)===null||j===void 0||(T=j[0])===null||T===void 0||(I=T.delta)===null||I===void 0?void 0:I.content:"",s.next=27;break;case 24:return s.prev=24,s.t0=s.catch(20),s.abrupt("continue",9);case 27:if(!k){s.next=30;break}return t(),s.abrupt("break",37);case 30:if(!(c!==0&&c!=="0"&&c!=="false"&&c!==!1&&!c)){s.next=32;break}return s.abrupt("continue",9);case 32:d[d.length-1].text||(d[d.length-1].text=""),d[d.length-1].text+=c,g(d),s.next=9;break;case 37:case"end":return s.stop()}},h,null,[[20,24]])}));return function(i,d,S){return u.apply(this,arguments)}}();function xe(){var u=(0,o.useState)(""),h=O()(u,2),i=h[0],d=h[1],S=(0,o.useState)([]),f=O()(S,2),t=f[0],g=f[1],b=(0,o.useState)(!1),e=O()(b,2),r=e[0],m=e[1],p=(0,o.useState)(!0),B=O()(p,2),k=B[0],y=B[1],N=(0,o.useState)(""),c=O()(N,2),C=c[0],j=c[1],T=(0,o.useRef)(null),I=function(l){g($()(l))},E=function(l){var x=$()(t);x[x.length-1].text=l,g(x)},s=function(l){y(l),m(l)},F=function(l){if(!r){var x=C;if(!(((x==null?void 0:x.replace(/(^\s*)|(\s*$)/g,""))==""||!x)&&!l)){!l&&d(x),s(!0);var Be=l?i:x,P=$()(t);l?P.push({id:!0}):P.push({text:x},{id:!0}),g(P),me(Be,P,{doneFn:function(){return s(!1)},lineFn:I}).catch(function(L){E(String(L)||"\u51FA\u9519\u4E86"),s(!1)}),j("")}}},pe=function(l){l=l||window.event,l.keyCode==13&&(l.preventDefault?l.preventDefault():l.returnValue=!1)};(0,o.useEffect)(function(){var v;(v=T.current)===null||v===void 0||v.focus()},[]);var Se=function(){return r?"https://img.alicdn.com/imgextra/i4/O1CN01BS5uSs22u2AjtpGFl_!!6000000007179-2-tps-24-24.png":"https://img.alicdn.com/imgextra/i4/O1CN01zlvoXu1o9rd2FpSfJ_!!6000000005183-2-tps-48-48.png"},ye=function(){m(!1),y(!0),d(""),g([])},Ne=(0,o.useMemo)(function(){return t},[t]),Ce=(0,o.useMemo)(function(){return k},[k]),je=(0,o.useMemo)(function(){return r},[r]),be=(0,o.useMemo)(function(){return F},[r,t]);return(0,n.jsxs)("div",{className:(t==null?void 0:t.length)>0?"idea-talk-box styleBox":"idea-talk-box",style:{background:"url('https://img.alicdn.com/imgextra/i3/O1CN01CKuAgv1jWEtktC1qo_!!6000000004555-0-tps-2880-1620.jpg')"},children:[(0,n.jsxs)("div",{className:(t==null?void 0:t.length)>0?"idea-talk-box-ideatalk idea-talk-box-ideatalks":"idea-talk-box-ideatalk",children:[(t==null?void 0:t.length)>0&&(0,n.jsx)("img",{src:"https://img.alicdn.com/imgextra/i1/O1CN019JZ3A91bN42JgtkZz_!!6000000003452-2-tps-48-48.png",className:"idea-talk-box-ideatalk-imgs",onClick:function(){return ye()}}),"chatGPT-3.5"]}),(0,n.jsx)("div",{className:(t==null?void 0:t.length)>0?"idea-talk-box-outerLayer outerLayerIsHeight":"idea-talk-box-outerLayer",children:(0,n.jsxs)("div",{className:"idea-talk-box-outerLayer-smallbox",children:[(t==null?void 0:t.length)>0&&(0,n.jsx)("div",{className:"idea-talk-box-content",children:(0,n.jsx)(te,{answerList:Ne,isShowImg:Ce,prohibit:je,onSubmit:be})}),(0,n.jsx)(M.Z,{style:{width:"100%"},children:(0,n.jsx)(M.Z.Item,{children:(0,n.jsx)("div",{className:"idea-talk-box-bigBox",children:(0,n.jsxs)("div",{className:(t==null?void 0:t.length)>0?"idea-talk-box-bigBox-input inputStyle":"idea-talk-box-bigBox-input",children:[(0,n.jsx)("div",{className:"OptionsMenuBox",children:(0,n.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01PWSks31iDdBe1GK0d_!!6000000004379-2-tps-200-200.png",className:"inputIcon"})}),(0,n.jsx)(ae.Z.TextArea,{name:"inputValue",autoSize:{minRows:1,maxRows:4},className:"typing",ref:T,placeholder:"\u8BF7\u8F93\u5165\u95EE\u9898",size:"large",value:C,onKeyDown:pe,onPressEnter:function(){return F()},onChange:function(l){return j(l.target.value.trim())},bordered:!1}),(0,n.jsx)("img",{src:Se(),alt:"",className:r?"svgImg isShowSvgImg":"svgImg",onClick:function(){return F()}})]})})})})]})})]})}}}]);
